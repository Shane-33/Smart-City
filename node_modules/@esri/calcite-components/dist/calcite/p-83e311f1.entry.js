/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */
import{r as e,h as i,H as t,a}from"./p-daaff213.js";import{s as l,a as n}from"./p-629513a0.js";import{a as s,c as r,d as c}from"./p-a9c49dc3.js";import{g as o,n as h,c as d,d as b}from"./p-953058ba.js";import{v as u}from"./p-1ecee1c3.js";import{c as p}from"./p-e8c77b5b.js";import"./p-23351819.js";import"./p-6e607443.js";import"./p-a97ae2a2.js";const g="label",v="label-range",m="unit-label",f="fill-success",L=class{constructor(i){e(this,i),this.labelFlipMax=.8,this.labelFlipProximity=.15,this.maxPercent=100,this.minPercent=0,this.resizeObserver=p("resize",(()=>this.resizeHandler())),this.formatLabel=(e,i)=>{if("percent"===i){if(!this.percentFormatting){const e=o(this.effectiveLocale),i=new Intl.NumberFormat(e,{useGrouping:this.groupSeparator,style:"percent"});this.percentFormatting={formatter:i,locale:e}}return this.percentFormatting.formatter.format(e)}return h.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},h.localize(e.toString())},this.appearance="outline-fill",this.disabled=!1,this.fillType="range",this.form=void 0,this.groupSeparator=!1,this.high=void 0,this.label=void 0,this.low=void 0,this.max=100,this.min=0,this.name=void 0,this.numberingSystem=void 0,this.rangeLabels=!1,this.rangeLabelType="percent",this.scale="m",this.unitLabel="",this.value=void 0,this.valueLabel=!1,this.valueLabelType="percent",this.currentPercent=void 0,this.effectiveLocale=void 0,this.highActive=void 0,this.highPercent=void 0,this.lowActive=void 0,this.lowPercent=void 0}handleRangeChange(){this.calculateValues(),this.updateLabels()}handleLabelChange(){this.updateLabels()}async componentWillLoad(){l(this),this.calculateValues(),s(this,this.value)}componentDidLoad(){n(this),this.updateLabels()}connectedCallback(){d(this),r(this),this.resizeObserver?.observe(this.el)}disconnectedCallback(){b(this),c(this),this.resizeObserver?.disconnect()}resizeHandler(){this.updateLabels()}updateLabels(){this.valueLabelEl&&this.determineValueLabelPosition(),this.rangeLabels&&this.determineVisibleLabels()}calculateValues(){const{min:e,max:i,low:t,high:a,value:l}=this,n=100*(t-e)/(i-e),s=100*(a-e)/(i-e),r=100*(l-e)/(i-e);(!t||t<e||t>a||t>i)&&(this.low=e),(!a||a>i||a<t||a<e)&&(this.high=i),l||(this.value=e),this.lowPercent=n,this.highPercent=s,this.currentPercent=l?r:0,this.lowActive=!!t&&t>e&&(!l||t>l)&&(!a||t<a),this.highActive=!!a&&e<=a&&a<i&&(!l||a>l)&&(!t||a>t)}getMeterKindCssClass(){const{low:e,high:i,min:t,max:a,value:l}=this,n=e||t,s=i||a,r=l<s;return!l||!e&&r||l<n?f:l>=n&&r?"fill-warning":l>=s?"fill-danger":f}intersects(e,i){return e&&i&&u(e.getBoundingClientRect(),i.getBoundingClientRect())}determineVisibleLabels(){const{minLabelEl:e,lowLabelEl:i,highLabelEl:t,maxLabelEl:a}=this,l=this.intersects(t,a),n=this.intersects(i,t),s=this.intersects(i,a),r=this.intersects(e,t),c=this.intersects(e,i),o=this.intersects(e,a),h="label-hidden";i&&(c||s||n?i.classList.add(h):i.classList.remove(h)),t&&(r||s||l?t.classList.add(h):t.classList.remove(h)),e&&a&&(o?a.classList.add(h):a.classList.remove(h))}determineValueLabelPosition(){const{valueLabelEl:e,meterContainerEl:i,currentPercent:t}=this,a=t>100?100:t>0?t:0;a+100*(e.getBoundingClientRect().width-0)/(i.getBoundingClientRect().width-0)>=100?(e.style.insetInlineEnd="0%",e.style.removeProperty("inset-inline-start")):(e.style.insetInlineStart=`${a}% `,e.style.removeProperty("inset-inline-end"))}renderMeterFill(){const{currentPercent:e,fillType:t}=this,a=this.getMeterKindCssClass();return i("div",{class:{fill:!0,[a]:"single"!==t},style:{width:`${e}%`}})}renderRangeLine(e){return i("div",{class:"step-line",style:{insetInlineStart:`${e}%`}})}renderValueLabel(){const{currentPercent:e,valueLabelType:t,unitLabel:a,value:l}=this,n=this.formatLabel("percent"===t?e/100:l||0,t);return i("div",{class:{[g]:!0,"label-value":!0},key:"low-label-line",ref:e=>this.valueLabelEl=e},n,a&&"percent"!==t&&i("span",{class:m}," ",a))}renderMinLabel(){const{rangeLabelType:e,min:t,minPercent:a,unitLabel:l}=this,n={insetInlineStart:`${a}%`},s=this.formatLabel("percent"===e?a:t,e);return i("div",{class:{[g]:!0,[v]:!0},key:"min-label-line",style:n,ref:e=>this.minLabelEl=e},s,l&&"percent"!==e&&i("span",{class:m}," ",l))}renderLowLabel(){const{rangeLabelType:e,low:t,lowPercent:a,highPercent:l,labelFlipProximity:n}=this,s=t?this.formatLabel("percent"===e?a/100:t,e):"";return i("div",{class:{[g]:!0,[v]:!0},key:"low-label-line",style:(l-a)/100<n?{insetInlineEnd:100-a+"%"}:{insetInlineStart:`${a}%`},ref:e=>this.lowLabelEl=e},s)}renderHighLabel(){const{rangeLabelType:e,high:t,highPercent:a,labelFlipMax:l}=this,n=t?this.formatLabel("percent"===e?a/100:t,e):"";return i("div",{class:{[g]:!0,[v]:!0},key:"high-label-line",style:a/100>=l?{insetInlineEnd:100-a+"%"}:{insetInlineStart:`${a}%`},ref:e=>this.highLabelEl=e},n)}renderMaxLabel(){const{rangeLabelType:e,max:t,maxPercent:a}=this,l={insetInlineEnd:100-a+"%"},n=this.formatLabel("percent"===e?a/100:t,e);return i("div",{class:{[g]:!0,[v]:!0},key:"max-label-line",style:l,ref:e=>this.maxLabelEl=e},n)}render(){const{appearance:e,currentPercent:a,highActive:l,highPercent:n,label:s,lowActive:r,lowPercent:c,max:o,maxPercent:h,min:d,minPercent:b,rangeLabels:u,rangeLabelType:p,unitLabel:g,value:v,valueLabel:m,valueLabelType:f}=this,L=this.formatLabel(a/100,"percent");return i(t,null,i("div",{"aria-label":s,"aria-valuemax":"percent"===p?h:o,"aria-valuemin":"percent"===p?b:d,"aria-valuenow":"percent"===f?a:v,"aria-valuetext":"percent"===f?L:g?`${v} ${g}`:void 0,class:{container:!0,"steps-visible":u,"value-visible":m,[e]:"outline-fill"!==e},role:"meter",ref:e=>this.meterContainerEl=e},this.renderMeterFill(),m&&this.renderValueLabel(),r&&this.renderRangeLine(c),l&&this.renderRangeLine(n),u&&this.renderMinLabel(),u&&r&&this.renderLowLabel(),u&&l&&this.renderHighLabel(),u&&this.renderMaxLabel()))}get el(){return a(this)}static get watchers(){return{min:["handleRangeChange"],max:["handleRangeChange"],low:["handleRangeChange"],high:["handleRangeChange"],value:["handleRangeChange"],rangeLabels:["handleLabelChange"],rangeLabelType:["handleLabelChange"],unitLabel:["handleLabelChange"],valueLabel:["handleLabelChange"],valueLabelType:["handleLabelChange"]}}};L.style=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host{display:flex;--calcite-meter-space-internal:0.125rem;--calcite-meter-height-internal:1rem;--calcite-meter-font-size-internal:var(--calcite-font-size--1)}:host([scale=s]){--calcite-meter-height-internal:0.75rem;--calcite-meter-font-size-internal:var(--calcite-font-size--2)}:host([scale=l]){--calcite-meter-height-internal:1.5rem;--calcite-meter-font-size-internal:var(--calcite-font-size-0)}.container{position:relative;margin:0px;display:flex;inline-size:100%;align-items:center;block-size:var(--calcite-meter-height-internal);background-color:var(--calcite-ui-foreground-2);border:1px solid var(--calcite-ui-border-3);border-radius:var(--calcite-meter-height-internal)}.solid{border:1px solid var(--calcite-ui-foreground-3);background-color:var(--calcite-ui-foreground-3)}.outline{background-color:transparent}.value-visible{margin-block-start:1.5rem}.steps-visible{margin-block-end:1.5rem}.step-line{position:absolute;inset-block:0px;display:block;inline-size:var(--calcite-meter-space-internal);background-color:var(--calcite-ui-border-3)}.label{position:absolute;font-size:var(--calcite-meter-font-size-internal)}.label-hidden{visibility:hidden;opacity:0}.label-value{inset-block-end:calc(100% + 0.5em);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}.label-range{color:var(--calcite-ui-text-3);inset-block-start:calc(100% + 0.5em)}.unit-label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-3)}.label-value .unit-label{font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-2)}.fill{position:absolute;z-index:var(--calcite-app-z-index);display:block;background-color:var(--calcite-ui-brand);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);inset-inline-start:var(--calcite-meter-space-internal);inset-block:var(--calcite-meter-space-internal);border-radius:var(--calcite-meter-height-internal);max-inline-size:calc(100% - var(--calcite-meter-space-internal) * 2);min-inline-size:calc(var(--calcite-meter-height-internal) - var(--calcite-meter-space-internal) * 2);transition-property:inline-size, background-color, box-shadow}.fill-danger{background-color:var(--calcite-ui-danger)}.fill-success{background-color:var(--calcite-ui-success)}.fill-warning{background-color:var(--calcite-ui-warning)}.solid .fill{inset-block:0;inset-inline-start:0;max-inline-size:100%;min-inline-size:calc(var(--calcite-meter-height-internal));box-shadow:0 0 0 1px var(--calcite-ui-brand)}.solid .fill-danger{box-shadow:0 0 0 1px var(--calcite-ui-danger)}.solid .fill-success{box-shadow:0 0 0 1px var(--calcite-ui-success)}.solid .fill-warning{box-shadow:0 0 0 1px var(--calcite-ui-warning)}";export{L as calcite_meter}