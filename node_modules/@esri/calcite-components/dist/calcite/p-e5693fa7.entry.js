/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.11.0
 */
import{r as t,c as e,h as s,H as i,a}from"./p-daaff213.js";import{c as o,d as n}from"./p-289967d1.js";import{u as h}from"./p-a0a1a6f8.js";import{e as c,c as r,d as l}from"./p-953058ba.js";import{u as m,c as d,d as p,s as u}from"./p-7a636ec7.js";import{c as f,s as b,a as g}from"./p-629513a0.js";import{c as C,d as T,a as v,H as y}from"./p-a9c49dc3.js";import"./p-1ecee1c3.js";import"./p-6e607443.js";import"./p-a97ae2a2.js";import"./p-835eb17c.js";import"./p-23351819.js";import"./p-e8c77b5b.js";const D=["CET","CST6CDT","EET","EST","EST5EDT","Factory","HST","MET","MST","MST7MDT","PST8PDT","UTC","WET"];function I(t){return t.replace(":15",".25").replace(":30",".5").replace(":45",".75").replace("âˆ’","-")}let Z;function j(t){return t.replace(/_/g," ")}function w(t,e,s=Date.now()){return c(e,{timeZone:t,timeZoneName:"shortOffset"}).formatToParts(s).find((({type:t})=>"timeZoneName"===t)).value}const x=class{constructor(s){t(this,s),this.calciteInputTimeZoneBeforeClose=e(this,"calciteInputTimeZoneBeforeClose",6),this.calciteInputTimeZoneBeforeOpen=e(this,"calciteInputTimeZoneBeforeOpen",6),this.calciteInputTimeZoneChange=e(this,"calciteInputTimeZoneChange",6),this.calciteInputTimeZoneClose=e(this,"calciteInputTimeZoneClose",6),this.calciteInputTimeZoneOpen=e(this,"calciteInputTimeZoneOpen",6),this.setComboboxRef=t=>{this.comboboxEl=t},this.onComboboxBeforeClose=t=>{t.stopPropagation(),this.calciteInputTimeZoneBeforeClose.emit()},this.onComboboxBeforeOpen=t=>{t.stopPropagation(),this.calciteInputTimeZoneBeforeOpen.emit()},this.onComboboxChange=t=>{t.stopPropagation();const e=this.findTimeZoneItem(t.target.selectedItems[0].getAttribute("data-value")),s=`${e.value}`;this.value!==s&&(this.value=s,this.selectedTimeZoneItem=e,this.calciteInputTimeZoneChange.emit())},this.onComboboxClose=t=>{t.stopPropagation(),this.open=!1,this.calciteInputTimeZoneClose.emit()},this.onComboboxOpen=t=>{this.open=!0,t.stopPropagation(),this.calciteInputTimeZoneOpen.emit()},this.disabled=!1,this.form=void 0,this.maxItems=0,this.messages=void 0,this.messageOverrides=void 0,this.mode="offset",this.name=void 0,this.open=!1,this.overlayPositioning="absolute",this.referenceDate=void 0,this.required=!1,this.scale="m",this.value=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}handleTimeZoneItemPropsChange(){this.createTimeZoneItems()}handleValueChange(t,e){const s=this.findTimeZoneItem(t);s?this.selectedTimeZoneItem=s:this.value=e}async setFocus(){await f(this),await this.comboboxEl.setFocus()}effectiveLocaleWatcher(){m(this,this.effectiveLocale)}onLabelClick(){this.setFocus()}findTimeZoneItem(t){const e=t;return this.timeZoneItems.find((({value:t})=>t==e))}async createTimeZoneItems(){return this.effectiveLocale&&this.messages?async function(t,e,s,i){const a=i.getTime(),o=Intl.supportedValuesOf("timeZone");return"offset"===s?(Z||(Z=Promise.all([import("./p-40c3153a.js"),import("./p-5de12cfc.js")])),Z.then((async([{groupTimeZones:s},{DateEngine:i}])=>{const o=await s({dateEngine:new i,groupDateRange:1,startDate:new Date(a).toISOString()}),n=new Intl.ListFormat(t,{style:"long",type:"conjunction"});return o.forEach((t=>{const e=[];let s=0;t.tzs.forEach(((t,i)=>{D.includes(t)&&s++,e[i]=s})),t.tzs=t.tzs.filter((t=>!D.includes(t))),t.labelTzIndices=t.labelTzIndices.map((t=>t-e[t])).filter((e=>e>=0&&e<t.tzs.length))})),o.map((({labelTzIndices:s,tzs:i})=>{const o=i[0],h=I(w(o,t,a)),c=function(t,e){const s=w(t,"en-US",e).replace("GMT","");return""===s?0:60*Number(I(s))}(o,a),r=s.map((t=>{const s=i[t];return e[s]||s.split("/").pop()})),l=function(t,e,s){return t.timeZoneLabel.replace("{offset}",e).replace("{cities}",s)}(e,h,n.format(r));return{label:l,value:c,filterValue:i.map((t=>j(t)))}})).filter((t=>!!t)).sort(((t,e)=>t.value-e.value))}))):o.map((t=>({label:j(t),value:t,filterValue:t}))).filter((t=>!!t)).sort()}(this.effectiveLocale,this.messages,this.mode,this.referenceDate instanceof Date?this.referenceDate:new Date(this.referenceDate??Date.now())):[]}connectedCallback(){C(this),o(this),r(this),d(this)}disconnectedCallback(){T(this),n(this),l(this),p(this)}async componentWillLoad(){b(this),await u(this),this.timeZoneItems=await this.createTimeZoneItems();const t="offset"===this.mode?-1*(new Date).getTimezoneOffset():(new Intl.DateTimeFormat).resolvedOptions().timeZone;this.selectedTimeZoneItem=this.findTimeZoneItem(this.value??t),this.selectedTimeZoneItem||(this.selectedTimeZoneItem=this.findTimeZoneItem(t));const e=`${this.selectedTimeZoneItem.value}`;v(this,e),this.value=e}componentDidLoad(){g(this)}componentDidRender(){h(this)}render(){return s(i,null,s("calcite-combobox",{clearDisabled:!0,disabled:this.disabled,label:this.messages.chooseTimeZone,lang:this.effectiveLocale,maxItems:this.maxItems,onCalciteComboboxBeforeClose:this.onComboboxBeforeClose,onCalciteComboboxBeforeOpen:this.onComboboxBeforeOpen,onCalciteComboboxChange:this.onComboboxChange,onCalciteComboboxClose:this.onComboboxClose,onCalciteComboboxOpen:this.onComboboxOpen,open:this.open,overlayPositioning:this.overlayPositioning,scale:this.scale,selectionMode:"single-persist",ref:this.setComboboxRef},this.timeZoneItems.map((t=>{const e=this.selectedTimeZoneItem===t,{label:i,value:a}=t;return s("calcite-combobox-item",{"data-value":a,key:i,selected:e,textLabel:i,value:`${t.filterValue}`})}))),s(y,{component:this}))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return a(this)}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["handleTimeZoneItemPropsChange","effectiveLocaleWatcher"],messages:["handleTimeZoneItemPropsChange"],mode:["handleTimeZoneItemPropsChange"],referenceDate:["handleTimeZoneItemPropsChange"],value:["handleValueChange"]}}};x.style=":host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([hidden]){display:none}[hidden]{display:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";export{x as calcite_input_time_zone}