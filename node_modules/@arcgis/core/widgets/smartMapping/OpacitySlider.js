/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as t}from"../../chunks/tslib.es6.js";import s from"../../Color.js";import{property as e}from"../../core/accessorSupport/decorators/property.js";import{cast as r}from"../../core/accessorSupport/decorators/cast.js";import"../../core/arrayUtils.js";import"../../core/has.js";import{subclass as i}from"../../core/accessorSupport/decorators/subclass.js";import{SmartMappingSliderBase as o}from"./SmartMappingSliderBase.js";import a from"./OpacitySlider/OpacitySliderViewModel.js";import{globalCss as l}from"../support/globalCss.js";import{legacyIcon as p}from"../support/legacyIcon.js";import"../support/widgetUtils.js";import{messageBundle as n}from"../support/decorators/messageBundle.js";import{tsx as d}from"../support/jsxFactory.js";var m;const c="esri-opacity-slider",g={base:c,widgetIcon:p.edit,rampElement:`${c}__ramp`,sliderContainer:`${c}__slider-container`,histogramContainer:`${c}__histogram-container`,track:`${c}--interactive-track`},u={trackFillColor:new s([0,121,193])};let h=m=class extends o{constructor(t,s){super(t,s),this.messages=null,this.style={...u},this.viewModel=new a,this._rampFillId=`${this.id}-ramp-fill`,this._bgFillId=`${this.id}-bg-fill`}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get stops(){return this.viewModel.stops}set stops(t){this.viewModel.stops=t}castStyle(t){return{...u,...t}}static fromVisualVariableResult(t,s){const{visualVariable:{stops:e},statistics:r}=t,{avg:i,max:o,min:a,stddev:l}=r;return new m({max:o,min:a,stops:e,histogramConfig:{average:i,standardDeviation:l,bins:s?s.bins:[]}})}updateFromVisualVariableResult(t,s){const{visualVariable:{stops:e},statistics:r}=t,{avg:i,max:o,min:a,stddev:l}=r;this.set({max:o,min:a,stops:e,histogramConfig:{average:i,standardDeviation:l,bins:s?s.bins:[]}})}render(){const{state:t,label:s,visibleElements:e}=this,r="disabled"===t,i=this.classes(g.base,l.widget,l.panel,{[l.disabled]:r,[g.track]:!!e.interactiveTrack});return d("div",{"aria-label":s,class:i},r?null:this.renderContent(this._renderRamp(),g.sliderContainer,g.histogramContainer))}_renderRamp(){const{_bgFillId:t,_rampFillId:s,style:{trackFillColor:e},viewModel:r,zoomOptions:i}=this,o=r.getStopInfo(e);return d("div",{class:g.rampElement},d("svg",{xmlns:"http://www.w3.org/2000/svg"},d("defs",null,this.renderRampFillDefinition(s,o),this.renderBackgroundFillDefinition(t)),d("rect",{fill:`url(#${t})`,height:"100%",width:"100%",x:"0",y:"0"}),d("rect",{fill:`url(#${s})`,height:"100%",width:"100%",x:"0",y:"0"})),i?this.renderZoomCaps():null)}};t([e()],h.prototype,"label",null),t([e(),n("esri/widgets/smartMapping/OpacitySlider/t9n/OpacitySlider")],h.prototype,"messages",void 0),t([e()],h.prototype,"stops",null),t([e()],h.prototype,"style",void 0),t([r("style")],h.prototype,"castStyle",null),t([e()],h.prototype,"viewModel",void 0),h=m=t([i("esri.widgets.smartMapping.OpacitySlider")],h);const v=h;export{v as default};
