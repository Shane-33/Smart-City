/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import{property as r}from"../../core/accessorSupport/decorators/property.js";import"../../core/accessorSupport/ensureType.js";import"../../core/arrayUtils.js";import"../../core/has.js";import{subclass as s}from"../../core/accessorSupport/decorators/subclass.js";import t from"../../renderers/support/ClassBreakInfo.js";import{SmartMappingSliderBase as o}from"./SmartMappingSliderBase.js";import i from"./ClassedColorSlider/ClassedColorSliderViewModel.js";import{globalCss as l}from"../support/globalCss.js";import{legacyIcon as a}from"../support/legacyIcon.js";import"../support/widgetUtils.js";import{messageBundle as n}from"../support/decorators/messageBundle.js";import{tsx as m}from"../support/jsxFactory.js";var d;const p="esri-classed-color-slider",c={base:p,widgetIcon:a.edit,rampElement:`${p}__ramp`,sliderContainer:`${p}__slider-container`,histogramContainer:`${p}__histogram-container`,track:`${p}--interactive-track`};let u=d=class extends o{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new i,this._bgFillId=`${this.id}-bg-fill`,this._rampFillId=`${this.id}-linear-gradient`}get breaks(){return this.viewModel.breaks}set breaks(e){this.viewModel.breaks=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}static fromRendererResult(e,r){const{renderer:{classBreakInfos:s}}=e,t=s.map((e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}}));return new d({breaks:t,histogramConfig:{bins:r?r.bins:[]}})}updateClassBreakInfos(e){const r=this.breaks;if(r.length===e.length)return e.map(((e,s)=>{const o=e.symbol;return o.color=r[s].color,new t({minValue:r[s].min,maxValue:r[s].max,symbol:o})}));console.error(`Number of input breakInfos must match number of slider breaks: ${r.length}`)}updateFromRendererResult(e,r){const{renderer:{classBreakInfos:s}}=e,t=s.map((e=>{const r=e.symbol.color;return{min:e.minValue,max:e.maxValue,color:r}}));this.set({breaks:t}),r?.bins&&(this.histogramConfig.bins=r.bins)}render(){const{state:e,label:r,visibleElements:s}=this,t="disabled"===e,o=this.classes(c.base,l.widget,l.panel,{[l.disabled]:t,[c.track]:!!s.interactiveTrack});return m("div",{"aria-label":r,class:o},t?null:this.renderContent(this._renderRamp(),c.sliderContainer,c.histogramContainer))}_renderRamp(){const{_bgFillId:e,_rampFillId:r,viewModel:s}=this,t=s.getStopInfo();return m("div",{class:c.rampElement},m("svg",{xmlns:"http://www.w3.org/2000/svg"},m("defs",null,this.renderRampFillDefinition(r,t),this.renderBackgroundFillDefinition(e)),m("rect",{fill:`url(#${e})`,height:"100%",width:"100%",x:"0",y:"0"}),m("rect",{fill:`url(#${r})`,height:"100%",width:"100%",x:"0",y:"0"})))}};e([r()],u.prototype,"breaks",null),e([r()],u.prototype,"label",null),e([r(),n("esri/widgets/smartMapping/ClassedColorSlider/t9n/ClassedColorSlider")],u.prototype,"messages",void 0),e([r()],u.prototype,"viewModel",void 0),u=d=e([s("esri.widgets.smartMapping.ClassedColorSlider")],u);const b=u;export{b as default};
