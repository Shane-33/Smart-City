/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as e}from"../../chunks/tslib.es6.js";import{isSome as o}from"../../core/arrayUtils.js";import{destroyMaybe as t}from"../../core/maybe.js";import{property as l}from"../../core/accessorSupport/decorators/property.js";import"../../core/accessorSupport/ensureType.js";import"../../core/has.js";import{subclass as s}from"../../core/accessorSupport/decorators/subclass.js";import i from"../Widget.js";import{loadCalciteComponents as n}from"./componentsUtils.js";import{globalCss as r}from"./globalCss.js";import{loadLabeledSwitchComponents as p,LabeledSwitch as a}from"./LabeledSwitch.js";import{legacyIcon as c}from"./legacyIcon.js";import"./widgetUtils.js";import{messageBundle as d}from"./decorators/messageBundle.js";import{tsx as h}from"./jsxFactory.js";import b from"./SketchTooltipControls/SketchTooltipControlsViewModel.js";import g from"./SketchTooltipControls/VisibleElements.js";const m="esri-sketch-tooltip-controls",u={base:m,widgetIcon:c.gear,block:`${m}__block`,blockContent:`${m}__block-content`,hintIcon:`${m}__hint-icon`};let w=class extends i{constructor(e,o){super(e,o),this._defaultViewModel=null,this.icon=null,this.iconClass=u.widgetIcon,this.visibleElements=new g,this.viewType=void 0,this._onTooltipsEnabledChange=e=>{this.tooltipOptions.enabled=e},this._onLabelsEnabledChange=e=>{this.labelOptions.enabled=e};const{tooltipOptions:t,labelOptions:l,viewModel:s}=e;this.viewModel=s??(this._defaultViewModel=new b({tooltipOptions:t,labelOptions:l}))}loadDependencies(){return Promise.all([n({block:()=>import("@esri/calcite-components/dist/components/calcite-block.js")}),p()])}render(){const{label:e,visibleElements:o}=this,t=this._renderContent();return h("div",{"aria-label":e,class:this.classes(u.base,r.widget)},t?h("calcite-block",{class:u.block,heading:o.header?this.label:"",key:"content-block",open:!0},h("div",{class:u.blockContent,key:"content"},t)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}set viewModel(e){e!==this._get("viewModel")&&(null!=this._defaultViewModel&&this._defaultViewModel===e||(this._defaultViewModel=t(this._defaultViewModel)),this._set("viewModel",e))}_renderContent(){const{visibleElements:e,viewType:t}=this,l=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&"2d"!==t?this._renderLabelsToggle():null].filter(o);return 0===l.length?null:l}_renderTooltipsToggle(){const{messages:e,tooltipOptions:o}=this;return h(a,{checked:o.enabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,labelOptions:o}=this;return h(a,{checked:o.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}};e([l()],w.prototype,"icon",void 0),e([l()],w.prototype,"iconClass",void 0),e([l()],w.prototype,"label",null),e([l()],w.prototype,"labelOptions",null),e([l()],w.prototype,"tooltipOptions",null),e([l()],w.prototype,"viewModel",null),e([l({type:g,nonNullable:!0})],w.prototype,"visibleElements",void 0),e([l(),d("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],w.prototype,"messages",void 0),e([l({type:String})],w.prototype,"viewType",void 0),w=e([s("esri.widgets.support.SketchTooltipControls")],w);const _=w;export{_ as default};
