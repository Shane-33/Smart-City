/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as s}from"../chunks/tslib.es6.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import"../core/accessorSupport/ensureType.js";import"../core/arrayUtils.js";import"../core/has.js";import{subclass as t}from"../core/accessorSupport/decorators/subclass.js";import{substitute as r}from"../intl/substitute.js";import o from"../widgets/Widget.js";import{storeNode as i}from"../widgets/support/widgetUtils.js";import{messageBundle as n}from"../widgets/support/decorators/messageBundle.js";import{tsx as u}from"../widgets/support/jsxFactory.js";const p="esri-identity-form",a={base:p,group:`${p}__group`,label:`${p}__label`,footer:`${p}__footer`,esriInput:"esri-input",esriButton:"esri-button",esriButtonSecondary:"esri-button--secondary"},l="ArcGIS Online";let d=class extends o{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:o,oAuthPrompt:n,messages:p}=this,d=u("div",{class:a.group},r(n?p.oAuthInfo:p.info,{server:e&&/\.arcgis\.com/i.test(e)?l:e,resource:`(${t||p.lblItem})`})),c=n?null:u("div",{class:a.group,key:"username"},u("label",{class:a.label},p.lblUser,u("input",{afterCreate:i,autocomplete:"off",bind:this,class:a.esriInput,"data-node-ref":"_usernameInputNode",required:!0,spellcheck:!1,type:"text",value:""}))),m=n?null:u("div",{class:a.group,key:"password"},u("label",{class:a.label},p.lblPwd,u("input",{afterCreate:i,bind:this,class:a.esriInput,"data-node-ref":"_passwordInputNode",required:!0,type:"password",value:""}))),h=u("div",{class:this.classes(a.group,a.footer)},u("input",{class:a.esriButton,disabled:!!o,type:"submit",value:o?p.lblSigning:p.lblOk}),u("input",{bind:this,class:this.classes(a.esriButton,a.esriButtonSecondary),onclick:this._cancel,type:"button",value:p.lblCancel})),b=s?u("div",null,s.details?.httpStatus?p.invalidUser:p.noAuthService):null;return u("form",{bind:this,class:a.base,onsubmit:this._submit},d,b,c,m,h)}_cancel(){this._set("signingIn",!1),this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(s){s.preventDefault(),this._set("signingIn",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit("submit",e)}};s([e(),n("esri/identity/t9n/identity")],d.prototype,"messages",void 0),s([e()],d.prototype,"signingIn",void 0),s([e()],d.prototype,"server",void 0),s([e()],d.prototype,"resource",void 0),s([e()],d.prototype,"error",void 0),s([e()],d.prototype,"oAuthPrompt",void 0),d=s([t("esri.identity.IdentityForm")],d);const c=d;export{c as default};
