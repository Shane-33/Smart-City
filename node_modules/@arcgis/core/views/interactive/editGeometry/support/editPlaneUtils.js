/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{u as o,s as i,g as s,z as r,A as n,c as t,i as a,a as e}from"../../../../chunks/vec2.js";import{g as c,J as f,i as u}from"../../../../chunks/vec3.js";import{f as p,Z as m}from"../../../../chunks/vec3f64.js";import{u as g,a as I}from"../../../../chunks/boundedPlane.js";import{sv2d as b}from"../../../../geometry/support/vectorStacks.js";import{MoveVertex as N}from"../operations/MoveVertex.js";import{RotateVertex as j}from"../operations/RotateVertex.js";import{ScaleVertex as E}from"../operations/ScaleVertex.js";import{UpdateVertices as T}from"../operations/UpdateVertices.js";function V(o,i){return d(o,i,!1)}function x(o,i){return d(o,i,!0)}function d(o,i,s){if(o instanceof T){if(o.operation instanceof N)return h(o.operation,i,s),!0;if(o.operation instanceof j)return v(o.operation,i,s),!0;if(o.operation instanceof E)return k(o.operation,i,s),!0}return!1}function h(o,i,s=!1){const r=s?-1:1,n=p(r*o.dx,r*o.dy,r*o.dz);c(i.origin,i.origin,n),g(i)}function v(o,i,s=!1){const r=s?-o.angle:o.angle;f(i.basis1,i.basis1,m,r),f(i.basis2,i.basis2,m,r),g(i)}function k(i,s,r=!1){const n=r?1/i.factor1:i.factor1,t=r?1/i.factor2:i.factor2;u(s.basis1,s.basis1,n),u(s.basis2,s.basis2,t),o(s.origin,s.origin,i.origin,i.axis1,n),o(s.origin,s.origin,i.origin,i.axis2,t),g(s)}function l(o,c,f,u){u||(u=I());const p=i(b.get(),o[1],-o[0]),m=i(b.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),N=i(b.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),j=b.get();c.components.forEach((t=>t.vertices.forEach((t=>{const a=t.pos;i(j,s(o,a),s(p,a)),r(m,m,j),n(N,N,j)}))));const E=1e-6,T=i(b.get(),N[0]-m[0]<E?f/2:0,N[1]-m[1]<E?f/2:0);return t(m,m,T),a(N,N,T),e(u.basis1,o,(N[0]-m[0])/2),e(u.basis2,p,(N[1]-m[1])/2),i(u.origin,m[0]*o[0]+m[1]*p[0],m[0]*o[1]+m[1]*p[1]),a(u.origin,u.origin,u.basis1),a(u.origin,u.origin,u.basis2),g(u),u}export{V as apply,l as calculateOrientedBounds,x as unapply};
