/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import o from"../../../core/Accessor.js";import{destroyMaybe as e}from"../../../core/maybe.js";import{watch as n,syncAndInitial as i}from"../../../core/reactiveUtils.js";import{property as s}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import{subclass as r}from"../../../core/accessorSupport/decorators/subclass.js";import{setCalciteThemeClass as c}from"../../../support/themeUtils.js";import{base as p}from"./css.js";import{tooltipContentFactory as l}from"./content/tooltipContentFactory.js";import{isRTL as a}from"../../../widgets/support/widgetUtils.js";const d={base:`${p}`};let u=class extends o{constructor(t){super(t),this.info=null,this.positionMode="follow-cursor",this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(d.base),c(t),t})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([n((()=>this.view.overlay?.surface),(o=>{t.remove(),o?.appendChild(t)}),i),n((()=>this.info),((o,n)=>{if(null!=this._contentWidget&&null!=o&&null!=n&&o.type===n.type)this._contentWidget.info=o;else{this._contentWidget=e(this._contentWidget);const n=l(this,o);n&&(this._contentWidget=n,n.container&&t.appendChild(n.container))}}),i),n((()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint,positionMode:this.positionMode})),h,i)])}destroy(){this._contentWidget=e(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t?.multiTouchActive?null:t?.latestPointerLocation}get test(){return{contentContainer:this._contentContainer,visible:"none"!==this._contentContainer?.style.display}}};function h({container:t,contentWidget:o,screenPoint:e,positionMode:n}){const{style:i}=t;if("docked"===n)return i.display="block",void(i.transform="none");if("fixed"!==n)if(null!=e&&null!=o){i.display="block";const o=a(t),n=`translate(${Math.round(e.x)+m[0]*(o?-1:1)}px, ${Math.round(e.y)+m[1]}px)`;i.transform=o?`translate(-100%, 0) ${n}`:n}else i.display="none"}t([s({nonNullable:!0})],u.prototype,"view",void 0),t([s()],u.prototype,"info",void 0),t([s()],u.prototype,"positionMode",void 0),t([s()],u.prototype,"_contentContainer",void 0),t([s()],u.prototype,"_contentWidget",void 0),t([s()],u.prototype,"_screenPoint",null),u=t([r("esri.views.interactive.tooltip.Tooltip")],u);const m=[20,20];export{u as Tooltip};
