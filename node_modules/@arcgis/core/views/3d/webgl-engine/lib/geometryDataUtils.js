/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{s as t,g as n,i as e,r as s}from"../../../../chunks/vec3.js";import{c as r}from"../../../../chunks/vec3f64.js";import{areaPoints3d as o}from"../../../../geometry/support/triangle.js";function c(s,r){if(!s)return!1;const{size:c,data:i,indices:f}=s;t(r,0,0,0),t(m,0,0,0);let d=0,g=0;for(let p=0;p<f.length-2;p+=3){const s=f[p]*c,h=f[p+1]*c,j=f[p+2]*c;t(a,i[s],i[s+1],i[s+2]),t(u,i[h],i[h+1],i[h+2]),t(l,i[j],i[j+1],i[j+2]);const z=o(a,u,l);z?(n(a,a,u),n(a,a,l),e(a,a,1/3*z),n(r,r,a),d+=z):(n(m,m,a),n(m,m,u),n(m,m,l),g+=3)}return(0!==g||0!==d)&&(0!==d?(e(r,r,1/d),!0):0!==g&&(e(r,m,1/g),!0))}function i(n,s){if(!n)return!1;const{size:r,data:o,indices:c}=n;t(s,0,0,0);let i=-1,f=0;for(let t=0;t<c.length;t++){const n=c[t]*r;i!==n&&(s[0]+=o[n],s[1]+=o[n+1],s[2]+=o[n+2],f++),i=n}return f>1&&e(s,s,1/f),f>0}function f(r,o,c){if(!r)return!1;t(c,0,0,0),t(m,0,0,0);let i=0,f=0;const{size:l,data:d,indices:g}=r,p=g.length-1,h=p+(o?2:0);for(let t=0;t<h;t+=2){const r=t<p?t+1:0,o=g[t<p?t:p]*l,h=g[r]*l;a[0]=d[o],a[1]=d[o+1],a[2]=d[o+2],u[0]=d[h],u[1]=d[h+1],u[2]=d[h+2],e(a,n(a,a,u),.5);const j=s(a,u);j>0?(n(c,c,e(a,a,j)),i+=j):0===i&&(n(m,m,a),f++)}return 0!==i?(e(c,c,1/i),!0):0!==f&&(e(c,m,1/f),!0)}const a=r(),u=r(),l=r(),m=r();export{f as computeAttachmentOriginLines,i as computeAttachmentOriginPoints,c as computeAttachmentOriginTriangles};
