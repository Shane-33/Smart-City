/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{l as r}from"../../../../chunks/mat4.js";import{c as t}from"../../../../chunks/vec3f64.js";import{diameter as e}from"../../../../geometry/support/aaBoundingBox.js";import{a as n}from"../../../../chunks/sphere.js";import{isPclIntersectorResult as i,isI3sIntersectorResult as l,isVoxelIntersectorResult as a}from"../../layers/i3s/Intersector.js";import{isTerrainIntersectorResult as u,isOverlayIntersectorResult as o}from"../../terrain/Intersector.js";import{isObjectIntersectorResult as c,isHudIntersectorResult as s}from"./intersectorUtils.js";import{isLodIntersectorResult as p}from"./lodRendering/Intersector.js";function g(r,t){return c(r)||s(r)?U(r.target?.object,t):u(r)?t.map?.ground:i(r)||l(r)||o(r)||a(r)?U(r.target,t):null}function f(r,t){const e=d(r,t);return null!=e&&"graphic"===e.type?e.graphic:null}function d(r,t){if(null==r)return null;if(c(r)||s(r))return h(r.target?.object,t);if(i(r)){const t=r.target.createGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if(a(r)){const t=r.target.createVoxelGraphic();return{type:"graphic",graphic:t,layer:t.layer}}return o(r)||p(r)?h(r.target,t):l(r)?m(r.target,t):null}function h(r,t){if(null==r?.graphicUid)return null;const e=U(r,t);if(null==e)return null;if(e===t.graphics)return null==t.graphicsView||"number"!=typeof r.graphicUid?null:t.graphicsView.getHit(r.graphicUid);const n=t.allLayerViews.find((r=>r.layer===e));return!n||n.suspended||null==r.graphicUid?null:"getHit"in n?n.getHit(r.graphicUid):null}function m(r,t){const e=U(r,t);if(null==e)return null;const n=t.allLayerViews.find((r=>r.layer===e));return n&&!n.suspended&&"getGraphicFromIntersectorTarget"in n?j(n.getGraphicFromIntersectorTarget(r)):null}function y(r,t){const e=U(r,t);if(null==e)return null;const n=t.allLayerViews.find((r=>r.layer===e));return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(r):null}function j(r){return null!=r?{type:"graphic",graphic:r,layer:r.layer}:null}function U(r,t){return null==r?.layerUid?null:null!=t.graphicsView&&r.layerUid===t.graphicsView.processor.layer.id?t.graphics:t.map.findLayerByUid(r.layerUid)}function V(t,i){if(c(t)||s(t))return n(t.target.object.boundingVolumeWorldSpace.bounds);if(p(t)){r(b,t.transformation);const e=Math.max(b[0],b[1],b[2]);return t.target.baseBoundingSphere.radius*e}if(l(t)){const r=y(t.target,i);return r?.5*e(r):null}return null}function B(r){return!c(r)&&!s(r)&&(p(r)?r.target.numLodLevels>1:!!l(r))}const b=t();export{V as getIntersectedFeatureBSRadius,B as hasLod,f as toGraphic,d as toHit,g as toOwner};
