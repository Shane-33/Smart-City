/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{minPriority as e}from"../../../../../core/MemCache.js";import{MemCachePool as t}from"../../../../../core/MemCachePool.js";import{VertexArrayObject as o}from"../../lib/VertexArrayObject.js";import{BufferObject as r}from"../../../../webgl/BufferObject.js";import{Usage as s}from"../../../../webgl/enums.js";const c=e+1;class i{constructor(e,o,r){this._rctx=e,this._locations=o,this._layout=r,this._cache=new t(e.newCache,"VAOCache")}dispose(){this._cache.destroy()}newVao(e){const t=e.toString();let c=this._cache.pop(t);return c||(c=new o(this._rctx,this._locations,{geometry:this._layout},{geometry:r.createVertex(this._rctx,s.STATIC_DRAW)}),c.vertexBuffers.geometry.setSize(e),c)}deleteVao(e){if(null==e)return;const t=e.byteSize.toString();this._cache.put(t,e,c)}}export{i as VaoCache};
