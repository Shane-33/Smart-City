/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{isDiagonalResizeHandle as t}from"../../../analysis/Slice/sliceToolUtils.js";import{EventPipeline as a}from"../../../../interactive/dragEventPipeline.js";class e{constructor(){this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent&&null!=this._next){const a={...this._lastDragEvent,action:"update"};t&&this._adjustScaleFactors(a),this._next.execute(a)}this._enabled=t}createDragEventPipelineStep(){this._lastDragEvent=null;const t=new a;return this._next=t,[t=>(this._lastDragEvent="end"!==t.action?{...t}:null,this._enabled&&this._adjustScaleFactors(t),t),t]}_adjustScaleFactors(a){const e=t(a.handle)?Math.max(Math.abs(a.factor1),Math.abs(a.factor2)):0===a.handle.direction[0]?Math.abs(a.factor2):Math.abs(a.factor1);a.factor1=a.factor1<0?-e:e,a.factor2=a.factor2<0?-e:e}get test(){return{_adjustScaleFactors:t=>this._adjustScaleFactors(t)}}}export{e as PreserveAspectRatio};
