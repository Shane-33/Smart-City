/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{getProjectionDefines as r,getInterpolationDefines as t}from"./utils.js";import{setTextures as o,setUniforms as e,getColormapUniforms as s,getStretchUniforms as n}from"../../../../webgl/rasterUtils.js";const a={vsPath:"raster/common",fsPath:"raster/stretch",attributes:new Map([["a_position",0],["a_texcoord",1]])};function m(o,e,s){const{colormap:n,bandCount:m}=e.symbolizerParameters,i=[...s?[]:r(e.transformGrid),...t(e.interpolation,1===m,o.context)];e.isRendereredSource&&!s?i.push("noop"):null!=n&&i.push("applyColormap");return{defines:i,program:o.painter.materialManager.getProgram(a,i)}}function i(r,t,a,m,i=!1){const{names:c,textures:u}=a.getTextures({useProcessedTexture:i});o(r.context,t,c,u),e(t,m,a.commonUniforms),t.setUniformMatrix3fv("u_dvsMat3",a.transforms.dvs);const l=a.symbolizerParameters,{colormap:p,colormapOffset:f}=l;if(null!=p){const r=s(p,f);e(t,m,r)}const d=n(l);e(t,m,d)}const c={createProgram:m,bindTextureAndUniforms:i};export{c as default};
