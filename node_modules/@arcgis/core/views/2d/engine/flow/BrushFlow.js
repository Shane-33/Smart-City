/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{c as t}from"../../../../chunks/mat3f32.js";import e from"../webgl/brushes/WGLBrush.js";import{CompareFunction as s}from"../../../webgl/enums.js";class a extends e{constructor(){super(...arguments),this._visualState={time:0,dvsMat3:t(),displayViewMat3:t()}}dispose(){}prepareState(t){const{context:e}=t;e.setColorMask(!0,!0,!0,!0),e.setStencilFunction(s.EQUAL,0,255)}draw(t,e){const{requestRender:s,allowDelayedRender:a}=t,{displayData:r}=e;if(null==r)return;if("loaded"===r.state.name&&r.attach(t),"attached"!==r.state.name)return;const i=r.state.resources;!a||i.ready||null==s?(this._visualState.time=t.time/1e3,this._visualState.dvsMat3=e.transforms.dvs,this._visualState.displayViewMat3=t.state.displayViewMat3,r.flowStyle.render(t,this._visualState,i),r.flowStyle.animated&&null!=s&&s()):s()}}export{a as default};
