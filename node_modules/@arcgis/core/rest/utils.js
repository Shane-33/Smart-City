/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import r from"../config.js";import{id as t}from"../kernel.js";import{clone as o}from"../core/lang.js";import{urlToObject as e}from"../core/urlUtils.js";import{supportsApiKey as n}from"../support/apiKeyUtils.js";function i(r,t){return t?{...t,query:{...r??{},...t.query}}:{query:r}}function f(r){return"string"==typeof r?e(r):o(r)}function s(r,t,o){const e={};for(const n in r){if("declaredClass"===n)continue;const i=r[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){e[n]=[];for(let r=0;r<i.length;r++)e[n][r]=s(i[r])}else if("object"==typeof i)if(i.toJSON){const r=i.toJSON(o?.[n]);e[n]=t?r:JSON.stringify(r)}else e[n]=t?i:JSON.stringify(i);else e[n]=i}return e}function l(o,e){return o?n(o)&&(e||r.apiKey)?e||r.apiKey:t?.findCredential(o)?.token:null}export{i as asValidOptions,s as encode,l as getToken,f as parseUrl};
