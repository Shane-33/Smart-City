/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{minPriority as e,RemoveMode as t}from"./MemCache.js";class c{constructor(e,t){this._cache=e(t,((e,t)=>this._remove(e,t)))}hitrate(){return this._cache.hitRate}destroy(){this._cache.destroy()}clear(){this._cache.clear()}pop(e){const t=this._cache.peek(e);if(!t)return;const c=t.pop();if(t.length>0){const c=t.reduce(((e,t)=>e+t.usedMemory),0);this._cache.updateSize(e,t,c)}else this._cache.pop(e);return c}put(t,c,s=e){const r=this._cache.peek(t);if(!r)return void this._cache.put(t,[c],c.usedMemory,s);r.push(c);const h=r.reduce(((e,t)=>e+t.usedMemory),0);this._cache.updateSize(t,r,h)}_remove(e,c){switch(c){case t.ALL:return e.forEach((e=>e.dispose())),0;case t.SOME:return e.shift()?.dispose(),e.reduce(((e,t)=>e+t.usedMemory),0)}}}export{c as MemCachePool};
