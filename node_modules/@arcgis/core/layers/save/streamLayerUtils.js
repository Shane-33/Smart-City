/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{save as e,saveAs as t}from"./utils.js";import{getWGS84ExtentForItem as r,addTypeKeyword as a,TypeKeyword as s}from"../../portal/support/portalItemUtils.js";const l="Stream Service",n="stream-layer-save",i="stream-layer-save-as";function o(e){return{isValid:"stream"===e.type&&!!e.url&&!e.webSocketUrl,errorMessage:"Stream layer should be created using a url to a stream service"}}function m(e){const t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function u(e,t){const{parsedUrl:l,title:n,fullExtent:i}=e;t.url=l.path,t.title||=n,t.extent=null,null!=i&&(t.extent=await r(i)),a(t,s.SINGLE_LAYER)}async function c(t,r){return e({layer:t,itemType:l,validateLayer:o,createItemData:m,errorNamePrefix:n},r)}async function y(e,r,a){return t({layer:e,itemType:l,validateLayer:o,createItemData:m,errorNamePrefix:i,newItem:r,setItemProperties:u},a)}export{c as save,y as saveAs};
