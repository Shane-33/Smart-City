/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{isString as n}from"../../widgets/support/dataUtils.js";import{dateOnlyToDateTime as e,timeOnlyToDateTime as l,timestampOffsetToDateTime as i}from"../../widgets/support/dateUtils.js";var t;!function(n){n.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",n.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(t||(t={}));const r=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function u(n){return null!=n&&r.has(n.type)}function a(n){return null!=n&&("date-only"===n.type||"esriFieldTypeDateOnly"===n.type)}function o(n){return null!=n&&("timestamp-offset"===n.type||"esriFieldTypeTimestampOffset"===n.type)}function s(n){return null!=n&&("time-only"===n.type||"esriFieldTypeTimeOnly"===n.type)}function m(n,e){const l=n?.domain;if(!l)return null;switch(l.type){case"range":{const{min:l,max:i}=d(n);if(null!=l&&+e<l||null!=i&&+e>i)return t.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==l.codedValues||l.codedValues.every((n=>null==n||n.code!==e)))return t.INVALID_CODED_VALUE}return null}function d(n,e){const l=e??n?.domain;if(!l||"range"!==l.type)return;const i="range"in l?l.range[0]:l.minValue,t="range"in l?l.range[1]:l.maxValue,r=u(n);return a(n)||s(n)||o(n)?{...p(n,t,i),isInteger:r}:{min:null!=i&&"number"==typeof i?i:null,max:null!=t&&"number"==typeof t?t:null,rawMin:i,rawMax:t,isInteger:r}}function p(t,r,u){if(a(t)){return{min:null!=u&&n(u)?e(u).toMillis():null,max:null!=r&&n(r)?e(r).toMillis():null,rawMin:u,rawMax:r}}if(s(t)){return{min:null!=u&&n(u)?l(u).toMillis():null,max:null!=r&&n(r)?l(r).toMillis():null,rawMin:u,rawMax:r}}if(o(t)){return{min:null!=u&&n(u)?i(u).toMillis():null,max:null!=r&&n(r)?i(r).toMillis():null,rawMin:u,rawMax:r}}return{max:null,min:null}}export{t as DomainValidationError,p as dateTimeFieldValuesToNumericRange,d as getDomainRange,m as validateDomainValue};
