/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as o}from"../../../chunks/tslib.es6.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import{subclass as s}from"../../../core/accessorSupport/decorators/subclass.js";import t from"./BaseRasterFunction.js";import e from"./ColormapFunctionArguments.js";import{getColormapByName as p}from"./colormaps.js";import{convertColorRampToColormap as n,getColorRampJSON as i}from"../../../renderers/support/colorRampUtils.js";let c=class extends t{constructor(){super(...arguments),this.functionName="Colormap",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isNoopProcess=!0}_bindSourceRasters(){const o=this.sourceRasterInfos[0];if(o.bandCount>1)return{success:!1,supportsGPU:!1,error:"colormap-function: source data must be single band"};let{colormap:r,colormapName:s,colorRamp:t,colorRampName:e}=this.functionArguments;if(!r?.length)if(t)r=n(t,{interpolateAlpha:!0});else if(e){const o=i(e);o&&(r=n(o))}else s&&(r=p(s));if(!r?.length)return{success:!1,supportsGPU:!1,error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");const c=o.clone();return c.pixelType=this.outputPixelType,c.colormap=r,c.bandCount=1,this.rasterInfo=c,{success:!0,supportsGPU:!0}}_processPixels(o){return o.pixelBlocks?.[0]}};o([r({json:{write:!0,name:"rasterFunction"}})],c.prototype,"functionName",void 0),o([r({type:e,json:{write:!0,name:"rasterFunctionArguments"}})],c.prototype,"functionArguments",void 0),o([r()],c.prototype,"rasterArgumentNames",void 0),o([r()],c.prototype,"isNoopProcess",void 0),o([r({json:{write:!0}})],c.prototype,"indexedColormap",void 0),c=o([s("esri.layers.support.rasterFunctions.ColormapFunction")],c);const u=c;export{u as default};
