/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{_ as t}from"../../../chunks/tslib.es6.js";import{property as r}from"../../../core/accessorSupport/decorators/property.js";import"../../../core/accessorSupport/ensureType.js";import"../../../core/arrayUtils.js";import"../../../core/has.js";import{subclass as s}from"../../../core/accessorSupport/decorators/subclass.js";import e from"./BaseRasterFunction.js";import o from"./CurvatureFunctionArguments.js";import{gcsFactor as i,curvature as u}from"./surfaceUtils.js";let n=class extends e{constructor(){super(...arguments),this.functionName="Curvature",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isGCS=!1}_bindSourceRasters(){this.outputPixelType=this._getOutputPixelType("f32");const t=this.sourceRasterInfos[0].clone();return t.pixelType=this.outputPixelType,t.statistics=null,t.histograms=null,t.colormap=null,t.attributeTable=null,t.bandCount=1,this.rasterInfo=t,this.isGCS=t.spatialReference?.isGeographic??!1,{success:!0,supportsGPU:!0}}_processPixels(t){const r=t.pixelBlocks?.[0];if(null==r)return null;const{zFactor:s,curvatureType:e}=this.functionArguments,{extent:o,primaryPixelSizes:n}=t,a=n?.[0],c=a??(o?{x:o.width/r.width,y:o.height/r.height}:{x:1,y:1}),p=this.isGCS&&s>=1?s*i:s;return u(r,{zFactor:p,curvatureType:e,resolution:c})}_getWebGLParameters(){const{zFactor:t,curvatureType:r}=this.functionArguments;return{curvatureType:r,zFactor:this.isGCS&&t>=1?t*i:t}}};t([r({json:{write:!0,name:"rasterFunction"}})],n.prototype,"functionName",void 0),t([r({type:o,json:{write:!0,name:"rasterFunctionArguments"}})],n.prototype,"functionArguments",void 0),t([r()],n.prototype,"rasterArgumentNames",void 0),t([r({json:{write:!0}})],n.prototype,"isGCS",void 0),n=t([s("esri.layers.support.rasterFunctions.CurvatureFunction")],n);const a=n;export{a as default};
