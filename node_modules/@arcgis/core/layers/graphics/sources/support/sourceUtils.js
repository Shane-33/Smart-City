/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
import{parseDate as t}from"../../../../core/date.js";import{isValid as n}from"../../../../geometry/support/spatialReferenceUtils.js";import{validateFieldValue as e,validationErrorToString as r,isNumericField as i,isStringField as o,isDateField as s,sanitizeNullFieldValue as l}from"../../../support/fieldUtils.js";class u{constructor(){this.code=null,this.description=null}}class c{constructor(t){this.error=new u,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function f(t){return new c(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function d(t){return new a(t)}const m=new Set;function p(t,n,i,o=!1){m.clear();for(const s in i){const l=t.get(s);if(!l)continue;const u=h(l,i[s]);if(m.add(l.name),l&&(o||l.editable)){const t=e(l,u);if(t)return f(r(t,l,u));n[l.name]=u}}for(const e of t?.requiredFields??[])if(!m.has(e.name))return f(`missing required field "${e.name}"`);return null}function g(n,e){if(n?.length)for(const{name:r}of n)"string"==typeof e[r]&&(e[r]=t(e[r]))}function h(n,e){let r=e;return i(n)&&"string"==typeof e?r=parseFloat(e):o(n)&&null!=e&&"string"!=typeof e?r=String(e):s(n)&&"string"==typeof e&&(r=t(e)),l(r)}let y;function w(t,e){if(!t||!n(e))return t;if("rings"in t||"paths"in t){if(null==y)throw new TypeError("geometry engine not loaded");return y.simplify(e,t)}return t}async function j(){return null==y&&(y=await import("../../../../geometry/geometryEngineJSON.js")),y}async function I(t,e){!n(t)||"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e||await j()}export{f as createFeatureEditErrorResult,d as createFeatureEditSuccessResult,I as loadGeometryEngineForSimplify,p as mixAttributes,g as parseStringDateFieldValues,w as simplify};
